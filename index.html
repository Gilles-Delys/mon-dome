<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur Dôme Géodésique - Master</title>
    <link rel="stylesheet" href="style.css">
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
</head>
<body>

    <nav class="top-nav">
        <button class="nav-btn active" data-target="parametres">Paramètres</button>
        <button class="nav-btn" data-target="schema">Schéma</button>
        <button class="nav-btn" data-target="details">Détails</button>
        <button class="nav-btn" data-target="resultats">Résultats</button>
        <button class="nav-btn" id="btn-export">Export</button>
    </nav>

    <div class="main-container">
        
        <aside id="parametres" class="sidebar active-panel">
            <h2>Paramètres de Construction</h2>
            
            <div class="control-group">
                <label class="tooltip-trigger">Fréquence V :
                    <span class="tooltip">Complexité du dôme. Plus le chiffre est haut, plus le dôme est rond.</span>
                </label>
                <select id="frequence">
                    <option value="1">1V</option>
                    <option value="2">2V</option>
                    <option value="3">3V</option>
                    <option value="4" selected>4V</option>
                    <option value="5">5V</option>
                    <option value="6">6V</option>
                </select>
            </div>

            <div class="control-group">
                <label class="tooltip-trigger">Rayon de la sphère (m) :
                    <span class="tooltip">Rayon théorique de la sphère englobante.</span>
                </label>
                <input type="number" id="rayon" value="2" step="0.1">
            </div>

            <div class="control-group">
                <label class="tooltip-trigger">Fraction de Sphère :
                    <span class="tooltip">Hauteur de coupe du dôme.</span>
                </label>
                <select id="fraction">
                    <option value="0.5" selected>1/2 (Hémisphère)</option>
                    <option value="0.375">3/8</option>
                    <option value="0.625">5/8</option>
                </select>
            </div>

            <hr>
            <h2>Type de Symétrie</h2>
            <div class="control-group">
                <label>Classe :</label>
                <select id="classe">
                    <option value="1">I (Icosaèdre)</option>
                </select>
            </div>

            <hr>
            <h2>Typologie & Matériaux</h2>
            <div class="radio-group">
                <label><input type="radio" name="typologie" value="starhub"> Avec Connecteurs (Star-Hub)</label>
                <label><input type="radio" name="typologie" value="goodkarma" checked> Sans Connecteurs (Good Karma)</label>
                <label><input type="radio" name="typologie" value="panel"> Dôme Panel</label>
                <label><input type="radio" name="typologie" value="hubstrut"> Hub-and-Strut</label>
            </div>

            <div class="control-group" style="margin-top:15px;">
                <label>Largeur montant (mm) :</label>
                <input type="number" id="largeur" value="120">
            </div>
            <div class="control-group">
                <label>Epaisseur montant (mm) :</label>
                <input type="number" id="epaisseur" value="40">
            </div>
        </aside>

        <main class="content-area">
            
            <div id="view-3d" class="view-panel active">
                <div id="canvas-container"></div>
            </div>

            <div id="view-schema" class="view-panel hidden">
                <div class="panel-content">
                    <h3>Schémas des Pièces</h3>
                    <div id="schema-content"></div>
                </div>
            </div>

            <div id="view-resultats" class="view-panel hidden">
                <div class="panel-content">
                    <h3>Résultats</h3>
                    <div class="results-grid">
                        <div class="res-item">Hauteur : <span id="res-hauteur">0</span> m</div>
                        <div class="res-item">Rayon Sol : <span id="res-rayon">0</span> m</div>
                        <div class="res-item">Surface Sol : <span id="res-sol">0</span> m²</div>
                        <div class="res-item">Surface Toit : <span id="res-couv">0</span> m²</div>
                    </div>
                    <h4>Liste des Montants</h4>
                    <div id="strut-list-table"></div>
                </div>
            </div>

             <div id="view-details" class="view-panel hidden">
                <div class="panel-content">
                    <h3>Détails Techniques</h3>
                    <p>Sélectionnez un onglet pour voir les données.</p>
                </div>
            </div>

        </main>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>